{"version":3,"sources":["../../src/services/output.service.ts"],"sourcesContent":["import { Area, PrismaClient, Output } from '@prisma/client';\nimport { HttpException } from '@exceptions/HttpException';\nimport { isEmpty } from '@utils/util';\nimport { CreateEntryExitDto, CreateProcessDto, GetFilteredProcessesDto } from '@/dtos/process.dto';\n\nclass OutputService {\n  public exits = new PrismaClient().output;\n\n  public async getAll(): Promise<Output[]> {\n    const all: Output[] = await this.exits.findMany({\n      orderBy: {\n        id: 'asc',\n      },\n    });\n    return all;\n  }\n\n  public async create(data: CreateEntryExitDto): Promise<Output> {\n    if (isEmpty(data)) throw new HttpException(400, 'data is empty');\n\n    const findEntry: Output = await this.exits.findUnique({ where: { name: data.name } });\n    if (findEntry) throw new HttpException(409, `Output with title ${data.name} already exists`);\n\n    const createEntry: Output = await this.exits.create({ data: { ...data } });\n    return createEntry;\n  }\n\n  public async update(id: number, data: CreateEntryExitDto): Promise<Output> {\n    if (isEmpty(data)) throw new HttpException(400, 'data is empty');\n\n    const findEntry: Output = await this.exits.findUnique({ where: { id: id } });\n    if (!findEntry) throw new HttpException(409, \"Output doesn't exist\");\n\n    const newEntry = await this.exits.update({ where: { id: id }, data: { ...data } });\n    return newEntry;\n  }\n\n  public async delete(id: number): Promise<Output> {\n    if (isEmpty(id)) throw new HttpException(400, \"Output doesn't exist\");\n\n    const findEntry: Output = await this.exits.findUnique({ where: { id: id } });\n    if (!findEntry) throw new HttpException(409, \"Output doesn't exist\");\n\n    const deleteEntry = await this.exits.delete({ where: { id: id } });\n    return deleteEntry;\n  }\n}\n\nexport default OutputService;\n"],"names":["OutputService","getAll","all","exits","findMany","orderBy","id","create","data","isEmpty","HttpException","findEntry","findUnique","where","name","createEntry","update","newEntry","delete","deleteEntry","PrismaClient","output"],"mappings":"AAAA;;;;+BAgDA;;aAAA;;wBAhD2C;+BACb;sBACN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGxB,IAAA,AAAMA,gBAAN,MAAMA;IAGJ,MAAaC,SAA4B;QACvC,MAAMC,MAAgB,MAAM,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAC;YAC9CC,SAAS;gBACPC,IAAI;YACN;QACF;QACA,OAAOJ;IACT;IAEA,MAAaK,OAAOC,IAAwB,EAAmB;QAC7D,IAAIC,IAAAA,aAAO,EAACD,OAAO,MAAM,IAAIE,4BAAa,CAAC,KAAK,iBAAiB;QAEjE,MAAMC,YAAoB,MAAM,IAAI,CAACR,KAAK,CAACS,UAAU,CAAC;YAAEC,OAAO;gBAAEC,MAAMN,KAAKM,IAAI;YAAC;QAAE;QACnF,IAAIH,WAAW,MAAM,IAAID,4BAAa,CAAC,KAAK,CAAC,kBAAkB,EAAEF,KAAKM,IAAI,CAAC,eAAe,CAAC,EAAE;QAE7F,MAAMC,cAAsB,MAAM,IAAI,CAACZ,KAAK,CAACI,MAAM,CAAC;YAAEC,MAAM,kBAAKA;QAAO;QACxE,OAAOO;IACT;IAEA,MAAaC,OAAOV,EAAU,EAAEE,IAAwB,EAAmB;QACzE,IAAIC,IAAAA,aAAO,EAACD,OAAO,MAAM,IAAIE,4BAAa,CAAC,KAAK,iBAAiB;QAEjE,MAAMC,YAAoB,MAAM,IAAI,CAACR,KAAK,CAACS,UAAU,CAAC;YAAEC,OAAO;gBAAEP,IAAIA;YAAG;QAAE;QAC1E,IAAI,CAACK,WAAW,MAAM,IAAID,4BAAa,CAAC,KAAK,wBAAwB;QAErE,MAAMO,WAAW,MAAM,IAAI,CAACd,KAAK,CAACa,MAAM,CAAC;YAAEH,OAAO;gBAAEP,IAAIA;YAAG;YAAGE,MAAM,kBAAKA;QAAO;QAChF,OAAOS;IACT;IAEA,MAAaC,OAAOZ,EAAU,EAAmB;QAC/C,IAAIG,IAAAA,aAAO,EAACH,KAAK,MAAM,IAAII,4BAAa,CAAC,KAAK,wBAAwB;QAEtE,MAAMC,YAAoB,MAAM,IAAI,CAACR,KAAK,CAACS,UAAU,CAAC;YAAEC,OAAO;gBAAEP,IAAIA;YAAG;QAAE;QAC1E,IAAI,CAACK,WAAW,MAAM,IAAID,4BAAa,CAAC,KAAK,wBAAwB;QAErE,MAAMS,cAAc,MAAM,IAAI,CAAChB,KAAK,CAACe,MAAM,CAAC;YAAEL,OAAO;gBAAEP,IAAIA;YAAG;QAAE;QAChE,OAAOa;IACT;;aAvCOhB,QAAQ,IAAIiB,oBAAY,GAAGC,MAAM;;AAwC1C;MAEA,WAAerB"}